<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>tufao: Tufao::HttpServerRequestRouter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">tufao
   &#160;<span id="projectnumber">0.4.0</span>
   </div>
   <div id="projectbrief">An asynchronous web framework for C++ built on top of Qt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_tufao_1_1_http_server_request_router.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_tufao_1_1_http_server_request_router-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Tufao::HttpServerRequestRouter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class provides a robust and high performance HTTP request router.  
 <a href="class_tufao_1_1_http_server_request_router.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Tufao::HttpServerRequestRouter:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_tufao_1_1_http_server_request_router__inherit__graph.png" border="0" usemap="#_tufao_1_1_http_server_request_router_inherit__map" alt="Inheritance graph"/></div>
<map name="_tufao_1_1_http_server_request_router_inherit__map" id="_tufao_1_1_http_server_request_router_inherit__map">
<area shape="rect" id="node2" href="class_tufao_1_1_abstract_http_server_request_handler.html" title="This class provides an interface for HttpServerRequest handlers." alt="" coords="8,131,203,253"/></map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for Tufao::HttpServerRequestRouter:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_tufao_1_1_http_server_request_router__coll__graph.png" border="0" usemap="#_tufao_1_1_http_server_request_router_coll__map" alt="Collaboration graph"/></div>
<map name="_tufao_1_1_http_server_request_router_coll__map" id="_tufao_1_1_http_server_request_router_coll__map">
<area shape="rect" id="node2" href="class_tufao_1_1_abstract_http_server_request_handler.html" title="This class provides an interface for HttpServerRequest handlers." alt="" coords="8,131,203,253"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:ae3ac45ccc4ad0561906bfb076e809cd0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#ae3ac45ccc4ad0561906bfb076e809cd0">handleRequest</a> (<a class="el" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> *request, <a class="el" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> *response, const QStringList &amp;args=QStringList())</td></tr>
<tr class="memdesc:ae3ac45ccc4ad0561906bfb076e809cd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">It will route the request to the right handler.  <a href="#ae3ac45ccc4ad0561906bfb076e809cd0"></a><br/></td></tr>
<tr class="separator:ae3ac45ccc4ad0561906bfb076e809cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_slots_class_tufao_1_1_abstract_http_server_request_handler"><td colspan="2" onclick="javascript:toggleInherit('pub_slots_class_tufao_1_1_abstract_http_server_request_handler')"><img src="closed.png" alt="-"/>&#160;Public Slots inherited from <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">Tufao::AbstractHttpServerRequestHandler</a></td></tr>
<tr class="memitem:aed26ee697197d2b5b30d9eef26f08cdd inherit pub_slots_class_tufao_1_1_abstract_http_server_request_handler"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html#aed26ee697197d2b5b30d9eef26f08cdd">handleRequest</a> (<a class="el" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> *request, <a class="el" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> *response, const QStringList &amp;args=QStringList())=0</td></tr>
<tr class="memdesc:aed26ee697197d2b5b30d9eef26f08cdd inherit pub_slots_class_tufao_1_1_abstract_http_server_request_handler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the <code>request</code> using the <code>response</code> object.  <a href="#aed26ee697197d2b5b30d9eef26f08cdd"></a><br/></td></tr>
<tr class="separator:aed26ee697197d2b5b30d9eef26f08cdd inherit pub_slots_class_tufao_1_1_abstract_http_server_request_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a08dae1b497df20e84bdcdf44eda9e197"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08dae1b497df20e84bdcdf44eda9e197"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a08dae1b497df20e84bdcdf44eda9e197">HttpServerRequestRouter</a> (QObject *parent=0)</td></tr>
<tr class="memdesc:a08dae1b497df20e84bdcdf44eda9e197"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a> object. <br/></td></tr>
<tr class="separator:a08dae1b497df20e84bdcdf44eda9e197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bafb67d6ab2b23c4686358537824ed7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bafb67d6ab2b23c4686358537824ed7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a2bafb67d6ab2b23c4686358537824ed7">~HttpServerRequestRouter</a> ()</td></tr>
<tr class="memdesc:a2bafb67d6ab2b23c4686358537824ed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the object. <br/></td></tr>
<tr class="separator:a2bafb67d6ab2b23c4686358537824ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c5ce95672cb8749fb03e0fa2b55cef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a53c5ce95672cb8749fb03e0fa2b55cef">map</a> (const QRegExp &amp;path, <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">AbstractHttpServerRequestHandler</a> *handler)</td></tr>
<tr class="memdesc:a53c5ce95672cb8749fb03e0fa2b55cef"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method maps requests which path components in the url matches the regular expression <code>path</code> to the given <code>handler</code>.  <a href="#a53c5ce95672cb8749fb03e0fa2b55cef"></a><br/></td></tr>
<tr class="separator:a53c5ce95672cb8749fb03e0fa2b55cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9658e02389a793076b6a62505cae9c88"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a9658e02389a793076b6a62505cae9c88">map</a> (const QRegExp &amp;path, const QByteArray &amp;method, <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">AbstractHttpServerRequestHandler</a> *handler)</td></tr>
<tr class="memdesc:a9658e02389a793076b6a62505cae9c88"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method maps requests which path components in the url matches the regular expression <code>path</code> and uses the HTTP verb <code>method</code> to the given <code>handler</code>.  <a href="#a9658e02389a793076b6a62505cae9c88"></a><br/></td></tr>
<tr class="separator:a9658e02389a793076b6a62505cae9c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae925311ee2ef01cdb044ce1f385d60a7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae925311ee2ef01cdb044ce1f385d60a7"></a>
<a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#ae925311ee2ef01cdb044ce1f385d60a7">unmap</a> (const QRegExp &amp;path, <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">AbstractHttpServerRequestHandler</a> *handler)</td></tr>
<tr class="memdesc:ae925311ee2ef01cdb044ce1f385d60a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all mappings that correspond to <code>path</code> and <code>handler</code> rules and aren't specific to a particular HTTP method. <br/></td></tr>
<tr class="separator:ae925311ee2ef01cdb044ce1f385d60a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0106173fd4f0667a68017ca09e2e5820"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0106173fd4f0667a68017ca09e2e5820"></a>
<a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a0106173fd4f0667a68017ca09e2e5820">unmap</a> (const QRegExp &amp;path, const QByteArray &amp;method, <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">AbstractHttpServerRequestHandler</a> *handler)</td></tr>
<tr class="memdesc:a0106173fd4f0667a68017ca09e2e5820"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all mappings that correspond to <code>path</code>, <code>method</code> and <code>handler</code> rules. <br/></td></tr>
<tr class="separator:a0106173fd4f0667a68017ca09e2e5820"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5408725f0ba6fc8e89db172e1be189cc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5408725f0ba6fc8e89db172e1be189cc"></a>
<a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a5408725f0ba6fc8e89db172e1be189cc">unmap</a> (const QRegExp &amp;path)</td></tr>
<tr class="memdesc:a5408725f0ba6fc8e89db172e1be189cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all mappings that correspond to <code>path</code> rule. <br/></td></tr>
<tr class="separator:a5408725f0ba6fc8e89db172e1be189cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7a2b6c7dd0f7880f6fb9222a951b602"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad7a2b6c7dd0f7880f6fb9222a951b602"></a>
<a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#ad7a2b6c7dd0f7880f6fb9222a951b602">unmap</a> (const QRegExp &amp;path, const QByteArray &amp;method)</td></tr>
<tr class="memdesc:ad7a2b6c7dd0f7880f6fb9222a951b602"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all mappings that correspond to <code>path</code> and <code>method</code> rules. <br/></td></tr>
<tr class="separator:ad7a2b6c7dd0f7880f6fb9222a951b602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85f30dfb55ba2abb79dd81d47b60848a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85f30dfb55ba2abb79dd81d47b60848a"></a>
<a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a85f30dfb55ba2abb79dd81d47b60848a">unmap</a> (<a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">AbstractHttpServerRequestHandler</a> *handler)</td></tr>
<tr class="memdesc:a85f30dfb55ba2abb79dd81d47b60848a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all mappings that correspond to <code>handler</code> rule. <br/></td></tr>
<tr class="separator:a85f30dfb55ba2abb79dd81d47b60848a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a002a7834cdd7349efda8ef043a6236db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a002a7834cdd7349efda8ef043a6236db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a002a7834cdd7349efda8ef043a6236db">clear</a> ()</td></tr>
<tr class="memdesc:a002a7834cdd7349efda8ef043a6236db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all mappings. <br/></td></tr>
<tr class="separator:a002a7834cdd7349efda8ef043a6236db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_tufao_1_1_abstract_http_server_request_handler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">Tufao::AbstractHttpServerRequestHandler</a></td></tr>
<tr class="memitem:a1ca70edb1388b128b5d6dcbb1b18f70d inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ca70edb1388b128b5d6dcbb1b18f70d"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html#a1ca70edb1388b128b5d6dcbb1b18f70d">AbstractHttpServerRequestHandler</a> (QObject *parent=0)</td></tr>
<tr class="memdesc:a1ca70edb1388b128b5d6dcbb1b18f70d inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html" title="This class provides an interface for HttpServerRequest handlers.">AbstractHttpServerRequestHandler</a> object. <br/></td></tr>
<tr class="separator:a1ca70edb1388b128b5d6dcbb1b18f70d inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class provides a robust and high performance HTTP request router. </p>
<p>It allows register <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html" title="This class provides an interface for HttpServerRequest handlers.">AbstractHttpServerRequestHandler</a> objects to handle requests that matches the mapping rules. The mapping rules are limited to use regular expressions to filter the url path component and, optionally, specify which method the object can handle.</p>
<p>The type of mapping rules used in this class provides a predictable behaviour that is simple to understand and allow the use of caching algorithms to improve the performance.</p>
<p>Did you note that <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a> is a subclass of <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html" title="This class provides an interface for HttpServerRequest handlers.">AbstractHttpServerRequestHandler</a>? This design choice allows you to nest routes. But the nicest thing (for you) may not be the nested routing possibility, but the interface that this class is implementing. This design allows you to use the same request routing object to handle the requests coming from a <a class="el" href="class_tufao_1_1_http_server.html" title="The Tufao::HttpServer class provides an implementation of the HTTP protocol.">HttpServer</a> and a <a class="el" href="class_tufao_1_1_https_server.html" title="Tufao::HttpsServer is a subclass of Tufao::HttpServer that provides secure communication with the cli...">HttpsServer</a> objects (or how many of them you need).</p>
<p>When the router finds one matching request handler, it will call its handleRequest method passing the request and response objects and also the captured texts by the regular expression. If the found handler cannot handle the request (this is indicated by the return value), the router will continue its quest in the search of a worthy handler. If the router fails in its quest (when no handlers are found or when none of the found handlers are able to respond the request), the handleRequest method in the router returns false and the connection remains open. This mean that you should always create a handler that responds to any request with a <em>404 not found</em> as the last handler in the most top-level request router.</p>
<p>The code below provides an example usage:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QtCore/QCoreApplication&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpServer&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpServerRequestRouter&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpFileServer&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpPluginServer&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;notfound.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;pluginreloader.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    Q_INIT_RESOURCE(<span class="keyword">static</span>);</div>
<div class="line">    <span class="comment">// First we create the event loop and the server objects</span></div>
<div class="line">    QCoreApplication a(argc, argv);</div>
<div class="line">    <a class="code" href="class_tufao_1_1_http_server.html" title="The Tufao::HttpServer class provides an implementation of the HTTP protocol.">Tufao::HttpServer</a> server;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Then we create a request router and configure it...</span></div>
<div class="line">    <a class="code" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">Tufao::HttpServerRequestRouter</a> router;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//   ...using some handlers</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// to allow you change the running code without restart the application</span></div>
<div class="line">    <a class="code" href="class_tufao_1_1_http_plugin_server.html" title="This class provides a plugin-based request handler.">Tufao::HttpPluginServer</a> pluginServer(<span class="stringliteral">&quot;routes.conf&quot;</span>);</div>
<div class="line">    <span class="comment">// do a request to http://localhost:8080/reload to reload the plugins</span></div>
<div class="line">    PluginReloader pluginReloader(&amp;pluginServer);</div>
<div class="line">    <span class="comment">// to server static files under public folder</span></div>
<div class="line">    <a class="code" href="class_tufao_1_1_http_file_server.html" title="You can use this class to serve static files under Tufão.">Tufao::HttpFileServer</a> fileServer(<span class="stringliteral">&quot;public&quot;</span>);</div>
<div class="line">    <span class="comment">// to respond the remaining requests with a &quot;404 - not found&quot;</span></div>
<div class="line">    NotFoundHandler handler404;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// you should also create handlers to:</span></div>
<div class="line">    <span class="comment">//   - &quot;/&quot; (maybe redirecting to some other path)</span></div>
<div class="line">    <span class="comment">//   - &quot;/favicon.ico&quot; (to serve the page&#39;s icon)</span></div>
<div class="line">    router.<a class="code" href="class_tufao_1_1_http_server_request_router.html#a53c5ce95672cb8749fb03e0fa2b55cef" title="This method maps requests which path components in the url matches the regular expression path to the...">map</a>(QRegExp(<span class="stringliteral">&quot;&quot;</span>), &amp;pluginServer)</div>
<div class="line">            .<a class="code" href="class_tufao_1_1_http_server_request_router.html#a53c5ce95672cb8749fb03e0fa2b55cef" title="This method maps requests which path components in the url matches the regular expression path to the...">map</a>(QRegExp(<span class="stringliteral">&quot;^/reload$&quot;</span>), &amp;pluginReloader)</div>
<div class="line">            .<a class="code" href="class_tufao_1_1_http_server_request_router.html#a53c5ce95672cb8749fb03e0fa2b55cef" title="This method maps requests which path components in the url matches the regular expression path to the...">map</a>(QRegExp(<span class="stringliteral">&quot;&quot;</span>), &amp;fileServer)</div>
<div class="line">            .<a class="code" href="class_tufao_1_1_http_server_request_router.html#a53c5ce95672cb8749fb03e0fa2b55cef" title="This method maps requests which path components in the url matches the regular expression path to the...">map</a>(QRegExp(<span class="stringliteral">&quot;&quot;</span>), &amp;handler404);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// We set the router as the global request handler</span></div>
<div class="line">    QObject::connect(&amp;server, SIGNAL(requestReady(<a class="code" href="class_tufao_1_1_http_server_request.html" title="The Tufao::HttpServer represents a HTTP request received by Tufao::HttpServer.">Tufao::HttpServerRequest</a>*,<a class="code" href="class_tufao_1_1_http_server_response.html" title="The Tufao::HttpServerResponse is used to respond to a Tufao::HttpServerRequest.">Tufao::HttpServerResponse</a>*)),</div>
<div class="line">                     &amp;router, SLOT(<a class="code" href="class_tufao_1_1_http_server_request_router.html#ae3ac45ccc4ad0561906bfb076e809cd0" title="It will route the request to the right handler.">handleRequest</a>(<a class="code" href="class_tufao_1_1_http_server_request.html" title="The Tufao::HttpServer represents a HTTP request received by Tufao::HttpServer.">Tufao::HttpServerRequest</a>*,<a class="code" href="class_tufao_1_1_http_server_response.html" title="The Tufao::HttpServerResponse is used to respond to a Tufao::HttpServerRequest.">Tufao::HttpServerResponse</a>*)));</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Last, we run our server...</span></div>
<div class="line">    server.<a class="code" href="class_tufao_1_1_http_server.html#a53ebaa69281886b1b8c2b535aaec8cd9" title="Tells the server to listen for incoming connections on address address and port port.">listen</a>(QHostAddress::Any, 8080);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//   ...and start the event loop    </span></div>
<div class="line">    <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section since"><dt>Since</dt><dd>0.3 </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae3ac45ccc4ad0561906bfb076e809cd0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tufao::HttpServerRequestRouter::handleRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> *&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> *&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QStringList &amp;&#160;</td>
          <td class="paramname"><em>args</em> = <code>QStringList()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>It will route the request to the right handler. </p>
<p>To route the request, it'll percent decode the path component from the url.</p>
<p>The <code>args</code> object is prepend in the list of captured texts by the regular expression and then passed to the handler. My advice is to don't overuse this feature or you will get a code difficult to understand.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns true if one handler able to respond the request is found. </dd></dl>

</div>
</div>
<a class="anchor" id="a53c5ce95672cb8749fb03e0fa2b55cef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a>&amp; Tufao::HttpServerRequestRouter::map </td>
          <td>(</td>
          <td class="paramtype">const QRegExp &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">AbstractHttpServerRequestHandler</a> *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method maps requests which path components in the url matches the regular expression <code>path</code> to the given <code>handler</code>. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns itself, so you can create several mappings in the same line of code. </dd></dl>

</div>
</div>
<a class="anchor" id="a9658e02389a793076b6a62505cae9c88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a>&amp; Tufao::HttpServerRequestRouter::map </td>
          <td>(</td>
          <td class="paramtype">const QRegExp &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const QByteArray &amp;&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">AbstractHttpServerRequestHandler</a> *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This method maps requests which path components in the url matches the regular expression <code>path</code> and uses the HTTP verb <code>method</code> to the given <code>handler</code>. </p>
<dl class="section note"><dt>Note</dt><dd>The router gives priority to maps that specified a method over the ones that didn't.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Returns itself, so you can create several mappings in the same line of code. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="httpserverrequestrouter_8h_source.html">httpserverrequestrouter.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_tufao.html">Tufao</a></li><li class="navelem"><a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a></li>
    <li class="footer">Generated on Mon Aug 27 2012 00:14:25 for tufao by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
