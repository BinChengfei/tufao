<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>tufao: Tufao::HttpServerRequestRouter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tufao_logo.svg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">tufao
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">An asynchronous web framework for C++ built on top of Qt</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_tufao_1_1_http_server_request_router.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-slots">Public Slots</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_tufao_1_1_http_server_request_router-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Tufao::HttpServerRequestRouter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class provides a robust and high performance HTTP request router.  
 <a href="class_tufao_1_1_http_server_request_router.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for Tufao::HttpServerRequestRouter:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_tufao_1_1_http_server_request_router__inherit__graph.png" border="0" usemap="#_tufao_1_1_http_server_request_router_inherit__map" alt="Inheritance graph"/></div>
<map name="_tufao_1_1_http_server_request_router_inherit__map" id="_tufao_1_1_http_server_request_router_inherit__map">
<area shape="rect" id="node3" href="class_tufao_1_1_abstract_http_server_request_handler.html" title="This class provides an interface for HttpServerRequest handlers." alt="" coords="100,6,303,157"/></map>
</div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Collaboration diagram for Tufao::HttpServerRequestRouter:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_tufao_1_1_http_server_request_router__coll__graph.png" border="0" usemap="#_tufao_1_1_http_server_request_router_coll__map" alt="Collaboration graph"/></div>
<map name="_tufao_1_1_http_server_request_router_coll__map" id="_tufao_1_1_http_server_request_router_coll__map">
<area shape="rect" id="node3" href="class_tufao_1_1_abstract_http_server_request_handler.html" title="This class provides an interface for HttpServerRequest handlers." alt="" coords="100,6,303,157"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html">Mapping</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class describes a request handler and a filter.  <a href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a4c96d0c91f19d56bee79e8dead3cfaff"><td class="memItemLeft" align="right" valign="top">typedef std::function&lt; bool(<a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> <br class="typebreak"/>
&amp;, <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a4c96d0c91f19d56bee79e8dead3cfaff">Handler</a></td></tr>
<tr class="memdesc:a4c96d0c91f19d56bee79e8dead3cfaff"><td class="mdescLeft">&#160;</td><td class="mdescRight">It's a simple typedef for the type of handler accepted by the <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a>.  <a href="#a4c96d0c91f19d56bee79e8dead3cfaff">More...</a><br/></td></tr>
<tr class="separator:a4c96d0c91f19d56bee79e8dead3cfaff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-slots"></a>
Public Slots</h2></td></tr>
<tr class="memitem:a4b2f5dcb77545084f99a28880e6fc5ae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a4b2f5dcb77545084f99a28880e6fc5ae">handleRequest</a> (<a class="el" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> &amp;request, <a class="el" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> &amp;response) override</td></tr>
<tr class="memdesc:a4b2f5dcb77545084f99a28880e6fc5ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">It will route the request to the right handler.  <a href="#a4b2f5dcb77545084f99a28880e6fc5ae">More...</a><br/></td></tr>
<tr class="separator:a4b2f5dcb77545084f99a28880e6fc5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a08dae1b497df20e84bdcdf44eda9e197"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08dae1b497df20e84bdcdf44eda9e197"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a08dae1b497df20e84bdcdf44eda9e197">HttpServerRequestRouter</a> (QObject *parent=0)</td></tr>
<tr class="memdesc:a08dae1b497df20e84bdcdf44eda9e197"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a> object. <br/></td></tr>
<tr class="separator:a08dae1b497df20e84bdcdf44eda9e197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a085ae2576ca0fcda95c37cce1d2c61ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a085ae2576ca0fcda95c37cce1d2c61ba">HttpServerRequestRouter</a> (std::initializer_list&lt; <a class="el" href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html">Mapping</a> &gt; mappings, QObject *parent=0)</td></tr>
<tr class="memdesc:a085ae2576ca0fcda95c37cce1d2c61ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a> object initialized with <code>mappings</code>.  <a href="#a085ae2576ca0fcda95c37cce1d2c61ba">More...</a><br/></td></tr>
<tr class="separator:a085ae2576ca0fcda95c37cce1d2c61ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bafb67d6ab2b23c4686358537824ed7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2bafb67d6ab2b23c4686358537824ed7"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a2bafb67d6ab2b23c4686358537824ed7">~HttpServerRequestRouter</a> ()</td></tr>
<tr class="memdesc:a2bafb67d6ab2b23c4686358537824ed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the object. <br/></td></tr>
<tr class="separator:a2bafb67d6ab2b23c4686358537824ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef79b6f9fff1daa8f75686f2c4bda6d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a4ef79b6f9fff1daa8f75686f2c4bda6d">map</a> (<a class="el" href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html">Mapping</a> map)</td></tr>
<tr class="memdesc:a4ef79b6f9fff1daa8f75686f2c4bda6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chain <code>map</code> to the list of handlers available to handle requests.  <a href="#a4ef79b6f9fff1daa8f75686f2c4bda6d">More...</a><br/></td></tr>
<tr class="separator:a4ef79b6f9fff1daa8f75686f2c4bda6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329f45f4d1f51e5635d6b13da76c0fa0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a329f45f4d1f51e5635d6b13da76c0fa0">map</a> (std::initializer_list&lt; <a class="el" href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html">Mapping</a> &gt; map)</td></tr>
<tr class="memdesc:a329f45f4d1f51e5635d6b13da76c0fa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chain <code>map</code> to the list of handlers available to handle requests.  <a href="#a329f45f4d1f51e5635d6b13da76c0fa0">More...</a><br/></td></tr>
<tr class="separator:a329f45f4d1f51e5635d6b13da76c0fa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0203f1115ca43d502233d68bfbdfe10a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a0203f1115ca43d502233d68bfbdfe10a">unmap</a> (int index)</td></tr>
<tr class="memdesc:a0203f1115ca43d502233d68bfbdfe10a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the mapping at <code>index</code>.  <a href="#a0203f1115ca43d502233d68bfbdfe10a">More...</a><br/></td></tr>
<tr class="separator:a0203f1115ca43d502233d68bfbdfe10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a002a7834cdd7349efda8ef043a6236db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a002a7834cdd7349efda8ef043a6236db"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_http_server_request_router.html#a002a7834cdd7349efda8ef043a6236db">clear</a> ()</td></tr>
<tr class="memdesc:a002a7834cdd7349efda8ef043a6236db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all mappings. <br/></td></tr>
<tr class="separator:a002a7834cdd7349efda8ef043a6236db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_tufao_1_1_abstract_http_server_request_handler')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html">Tufao::AbstractHttpServerRequestHandler</a></td></tr>
<tr class="memitem:aa1cc8e7e0e5c7f4c91eeed8542004177 inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html#aa1cc8e7e0e5c7f4c91eeed8542004177">operator std::function&lt; bool</a> (<a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a> &amp;, <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a> &amp;)&gt;()</td></tr>
<tr class="memdesc:aa1cc8e7e0e5c7f4c91eeed8542004177 inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implicit conversion operator to std::function functor object.  <a href="#aa1cc8e7e0e5c7f4c91eeed8542004177">More...</a><br/></td></tr>
<tr class="separator:aa1cc8e7e0e5c7f4c91eeed8542004177 inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0391acca2efe108644c9e7bc3575af8 inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tufao_1_1_abstract_http_server_request_handler.html#aa0391acca2efe108644c9e7bc3575af8">handleRequest</a> (<a class="el" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> &amp;request, <a class="el" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> &amp;response)=0</td></tr>
<tr class="memdesc:aa0391acca2efe108644c9e7bc3575af8 inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the <code>request</code> using the <code>response</code> object.  <a href="#aa0391acca2efe108644c9e7bc3575af8">More...</a><br/></td></tr>
<tr class="separator:aa0391acca2efe108644c9e7bc3575af8 inherit pub_methods_class_tufao_1_1_abstract_http_server_request_handler"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class provides a robust and high performance HTTP request router. </p>
<p>It allows register a chain of request handlers. This router uses mapping rules based on the url's path component and http method to determine the correct handlers.</p>
<p>The type of mapping rules used in this class provides a predictable behaviour that is simple to understand and allow the use of caching algorithms to improve the performance.</p>
<p>When the router finds one matching request handler, it will call it passing the request and response objects. If the found handler cannot handle the request (this is indicated by the return value), the router will continue its quest in the search of a worthy handler. If the router fails in its quest (when no handlers are found or when none of the found handlers are able to respond the request), the handleRequest method in the router returns false and the connection remains open. This mean that you should always create a handler that responds to any request with a <em>404 not found</em> as the last handler in the most top-level request router.</p>
<p>The code below provides an example usage:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QCoreApplication&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpPluginServer&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpFileServer&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/NotFoundHandler&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpServerRequestRouter&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Tufao/HttpServer&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">using namespace </span>Tufao;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    QCoreApplication a(argc, argv);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="class_tufao_1_1_http_plugin_server.html" title="This class provides a plugin-based request handler.">HttpPluginServer</a> plugins{<span class="stringliteral">&quot;routes.json&quot;</span>};</div>
<div class="line"></div>
<div class="line">    <a class="code" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a> router{</div>
<div class="line">        {QRegularExpression{<span class="stringliteral">&quot;&quot;</span>}, plugins},</div>
<div class="line">        {QRegularExpression{<span class="stringliteral">&quot;&quot;</span>}, <a class="code" href="class_tufao_1_1_http_file_server.html#a1f29209673aa254e50431993aaa56c15" title="Returns a handler that don&#39;t depends on another object.">HttpFileServer::handler</a>(<span class="stringliteral">&quot;public&quot;</span>)},</div>
<div class="line">        {QRegularExpression{<span class="stringliteral">&quot;&quot;</span>}, <a class="code" href="class_tufao_1_1_not_found_handler.html#ae97accd2a8e5820efc71786a7997c8c2" title="Returns a handler that don&#39;t depends on another object.">NotFoundHandler::handler</a>()}</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <a class="code" href="class_tufao_1_1_http_server.html" title="The Tufao::HttpServer class provides an implementation of the HTTP protocol.">HttpServer</a> server;</div>
<div class="line"></div>
<div class="line">    QObject::connect(&amp;server, &amp;<a class="code" href="class_tufao_1_1_http_server.html#a3b35a246b8d6ca72cc246a36c1e4ae71" title="This signal is emitted each time there is request.">HttpServer::requestReady</a>,</div>
<div class="line">                     &amp;router, &amp;<a class="code" href="class_tufao_1_1_http_server_request_router.html#a4b2f5dcb77545084f99a28880e6fc5ae" title="It will route the request to the right handler.">HttpServerRequestRouter::handleRequest</a>);</div>
<div class="line"></div>
<div class="line">    server.<a class="code" href="class_tufao_1_1_http_server.html#a53ebaa69281886b1b8c2b535aaec8cd9" title="Tells the server to listen for incoming connections on address address and port port.">listen</a>(QHostAddress::Any, 8080);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section since"><dt>Since</dt><dd>0.3 </dd></dl>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a4c96d0c91f19d56bee79e8dead3cfaff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::function&lt;bool(<a class="el" href="class_tufao_1_1_http_server_request.html">HttpServerRequest</a>&amp;, <a class="el" href="class_tufao_1_1_http_server_response.html">HttpServerResponse</a>&amp;)&gt; <a class="el" href="class_tufao_1_1_http_server_request_router.html#a4c96d0c91f19d56bee79e8dead3cfaff">Tufao::HttpServerRequestRouter::Handler</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>It's a simple typedef for the type of handler accepted by the <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a085ae2576ca0fcda95c37cce1d2c61ba"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Tufao::HttpServerRequestRouter::HttpServerRequestRouter </td>
          <td>(</td>
          <td class="paramtype">std::initializer_list&lt; <a class="el" href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html">Mapping</a> &gt;&#160;</td>
          <td class="paramname"><em>mappings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">QObject *&#160;</td>
          <td class="paramname"><em>parent</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="class_tufao_1_1_http_server_request_router.html" title="This class provides a robust and high performance HTTP request router.">HttpServerRequestRouter</a> object initialized with <code>mappings</code>. </p>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4b2f5dcb77545084f99a28880e6fc5ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Tufao::HttpServerRequestRouter::handleRequest </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_request.html">Tufao::HttpServerRequest</a> &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_tufao_1_1_http_server_response.html">Tufao::HttpServerResponse</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>It will route the request to the right handler. </p>
<p>The handler will have access to the list of captured texts by the regular expression using <a class="el" href="class_tufao_1_1_http_server_request.html#ab3c0be63479f7414073f5bb37a2a9297" title="Returns the user data as set in setCustomData.">HttpServerRequest::customData</a>.</p>
<dl class="section note"><dt>Note</dt><dd>The router won't touch the <a class="el" href="class_tufao_1_1_http_server_request.html#ab3c0be63479f7414073f5bb37a2a9297" title="Returns the user data as set in setCustomData.">HttpServerRequest::customData</a> if the regex don't capture any text.</dd></dl>
<p>See example below:</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> Handler::handleRequest(HttpServerRequest &amp;request,</div>
<div class="line">                            HttpServerResponse &amp;response)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    QStringList args = request.customData().toMap()[<span class="stringliteral">&quot;args&quot;</span>].toStringList();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>If there is already an object set for this request, the router will do the following steps:</p>
<ol type="1">
<li>If the object is not a QVariantMap, override it</li>
<li>If the object already has a item with the key "args", but the value is not a QStringList, override the item</li>
<li>Append the list of captured texts in the object["args"]</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>The request's custom data is copied at the beginning and is used to restore the custom data state before call every handler. The state will also be restored if no handlers are capable of handle the request.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Returns true if one handler able to respond the request is found.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a4ef79b6f9fff1daa8f75686f2c4bda6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Tufao::HttpServerRequestRouter::map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html">Mapping</a>&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chain <code>map</code> to the list of handlers available to handle requests. </p>
<dl class="section return"><dt>Returns</dt><dd>The index of the new mapping.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a329f45f4d1f51e5635d6b13da76c0fa0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Tufao::HttpServerRequestRouter::map </td>
          <td>(</td>
          <td class="paramtype">std::initializer_list&lt; <a class="el" href="struct_tufao_1_1_http_server_request_router_1_1_mapping.html">Mapping</a> &gt;&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Chain <code>map</code> to the list of handlers available to handle requests. </p>
<dl class="section return"><dt>Returns</dt><dd>The index of the first element in the new mapping range.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<a class="anchor" id="a0203f1115ca43d502233d68bfbdfe10a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Tufao::HttpServerRequestRouter::unmap </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the mapping at <code>index</code>. </p>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="httpserverrequestrouter_8h_source.html">httpserverrequestrouter.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_tufao.html">Tufao</a></li><li class="navelem"><a class="el" href="class_tufao_1_1_http_server_request_router.html">HttpServerRequestRouter</a></li>
    <li class="footer">Generated on Tue May 21 2013 04:58:20 for tufao by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
